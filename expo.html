<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>Mobile Game Shell</title>
    <style>
      :root {
        --bg: #0f172a;
        --surface: #111827;
        --surface-2: #1f2937;
        --text: #e5e7eb;
        --accent: #f97316;
        --gap: 0.5rem;
        --radius: 0.75rem;
        --maxw: 480px;
        --bar-h: 52px;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
      }

      body {
        margin: 0;
        background: var(--bg);
        color: var(--text);
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        overflow: hidden; /* no page scroll */
      }

      #app {
        height: 100dvh;
        width: 100%;
        max-width: var(--maxw);
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        background: radial-gradient(circle at top, #111827, #020617 65%);
      }

      .top-bar {
        flex: 0 0 var(--bar-h);
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 0.15rem;
        padding: 0 1rem;
        background: rgba(2, 6, 23, 0.5);
        backdrop-filter: blur(10px);
      }

      .top-bar .title {
        font-weight: 600;
        font-size: 0.9rem;
      }

      .top-bar .subtitle {
        font-size: 0.7rem;
        opacity: 0.7;
      }

      .main {
        flex: 1 1 auto;
        display: flex;
        flex-direction: column;
        gap: var(--gap);
        padding: var(--gap);
        overflow: hidden; /* children must fit */
      }

      /* GAME SCREEN IS FIXED HEIGHT. DO NOT LET AI CHANGE THIS UNLESS HUMAN SAYS SO. */
      #game-screen {
        flex: 0 0 230px;
        background: var(--surface);
        border-radius: var(--radius);
        padding: var(--gap);
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      #side-panel {
        flex: 1 1 auto;
        background: var(--surface-2);
        border-radius: var(--radius);
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      .panel-scroll {
        flex: 1 1 auto;
        overflow-y: auto;
        padding: var(--gap);
        gap: 0.35rem;
        display: flex;
        flex-direction: column;
        -webkit-overflow-scrolling: touch;
      }

      .bottom-bar {
        flex: 0 0 var(--bar-h);
        display: flex;
        gap: 0.5rem;
        align-items: center;
        padding: 0 0.5rem 0.5rem;
        background: rgba(2, 6, 23, 0.5);
        backdrop-filter: blur(10px);
      }

      .status {
        flex: 1 1 auto;
        font-size: 0.7rem;
        opacity: 0.8;
        min-width: 0;
      }

      .btn {
        flex: 0 0 auto;
        background: var(--accent);
        color: #0f172a;
        border: none;
        border-radius: 9999px;
        padding: 0.4rem 0.9rem;
        font-weight: 600;
        font-size: 0.75rem;
      }

      /* UTILITIES */
      .text-ellipsis {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .section-title {
        font-size: 0.75rem;
        font-weight: 600;
      }

      .section-note {
        font-size: 0.65rem;
        opacity: 0.75;
      }

      .warn {
        color: #f97316;
      }

      .placeholder-box {
        border: 1px dashed rgba(229, 231, 235, 0.12);
        border-radius: 0.5rem;
        padding: 0.4rem;
        background: rgba(15, 23, 42, 0.25);
      }

      .notes {
        list-style: disc;
        margin: 0;
        padding-left: 1.1rem;
      }
      .notes li {
        font-size: 0.65rem;
        margin-bottom: 0.25rem;
      }

      .log-list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: grid;
        gap: 0.25rem;
      }

      .log-row {
        font-size: 0.65rem;
        background: rgba(15, 23, 42, 0.4);
        border-radius: 0.35rem;
        padding: 0.35rem 0.5rem;
      }

      /* Example tile defaults for future AI to reuse */
      .tile {
        width: 60px;
        aspect-ratio: 1 / 1;
        background: rgba(248, 250, 252, 0.04);
        border-radius: 0.75rem;
        display: grid;
        place-items: center;
        font-size: 1.6rem;
        position: relative;
      }

      .tile-icon-hidden {
        visibility: hidden; /* use this, not display:none */
      }
    </style>
  </head>
  <body>
    <!--
      WORKFLOW (for AI and for future you):

      1. Do NOT change the layout wrappers: <body>, #app, .top-bar, .main, #game-screen, #side-panel, .bottom-bar.
      2. All new UI goes ONLY inside the marked regions:
         - BEGIN: GAME-VIEW
         - BEGIN: PANEL-CONTENT
      3. Do NOT add page-level scroll. If content overflows, make the INNER element scroll.
      4. Keep max width at 480px for mobile portrait.
      5. Use existing CSS variables. Do not invent new spacing unless missing.
      6. JS edits should prefer adding functions to Game.* instead of rewriting Game.init().
      7. Tiles or cards must NOT change size when content changes. Use visibility/opacity, not display:none.
      8. Text must truncate, not reflow, unless explicitly asked.
      9. If you need to change the structure, ask the human.
    -->
    <div id="app">
      <header class="top-bar">
        <div class="title text-ellipsis">Mobile Game Shell</div>
        <div class="subtitle text-ellipsis">layout locked</div>
      </header>

      <main class="main">
        <!-- GAME AREA -->
        <section id="game-screen">
          <!-- BEGIN: GAME-VIEW -->
          <div class="placeholder-box">
            <p class="section-title">Game view</p>
            <p class="section-note">
              Put board, map, idle meters, or puzzle grid here.
            </p>
            <p class="section-note warn">
              Do not resize #game-screen. Fit content inside.
            </p>
          </div>
          <!-- END: GAME-VIEW -->
        </section>

        <!-- PANEL / HUD / LOG -->
        <section id="side-panel">
          <!-- BEGIN: PANEL-CONTENT -->
          <div class="panel-scroll">
            <p class="section-title">Dev / AI instructions</p>
            <ul class="notes">
              <li>Do not introduce body scroll.</li>
              <li>
                If text is long, apply class <code>.text-ellipsis</code> or
                <code>.line-clamp-2</code>.
              </li>
              <li>
                If adding buttons, use <code>.btn</code> inside this panel only.
              </li>
              <li>
                If adding logs, append to <code>#log-list</code> in JS.
              </li>
            </ul>
            <p class="section-title">Sample log</p>
            <ul id="log-list" class="log-list">
              <li class="log-row text-ellipsis">Game initialized.</li>
            </ul>
          </div>
          <!-- END: PANEL-CONTENT -->
        </section>
      </main>

      <footer class="bottom-bar">
        <div class="status text-ellipsis" id="status-line">
          ready
        </div>
        <button class="btn" id="demo-btn">+ log</button>
      </footer>
    </div>

    <script>
      // GAME SHELL
      // Rules for AI:
      // 1. Do NOT remove Game.init() or the event listener at the bottom.
      // 2. If adding features, extend Game.* instead of changing the root shape.
      // 3. Keep DOM selectors in Game.dom only.

      const Game = {
        dom: {
          screen: null,
          panel: null,
          logList: null,
          status: null,
          demoBtn: null,
        },
        state: {
          logs: ["Game initialized."],
        },
        init() {
          this.cacheDom();
          this.bindEvents();
          this.renderAll();
          this.setStatus("ready");
        },
        cacheDom() {
          this.dom.screen = document.querySelector("#game-screen");
          this.dom.panel = document.querySelector("#side-panel");
          this.dom.logList = document.querySelector("#log-list");
          this.dom.status = document.querySelector("#status-line");
          this.dom.demoBtn = document.querySelector("#demo-btn");
        },
        bindEvents() {
          if (this.dom.demoBtn) {
            this.dom.demoBtn.addEventListener("click", () => {
              this.addLog("Demo log " + new Date().toLocaleTimeString());
            });
          }
        },
        addLog(msg) {
          const clean = msg.length > 90 ? msg.slice(0, 90) + "â€¦" : msg;
          this.state.logs.unshift(clean);
          if (this.state.logs.length > 10) this.state.logs.pop();
          this.renderLogs();
        },
        renderLogs() {
          if (!this.dom.logList) return;
          this.dom.logList.innerHTML = this.state.logs
            .map(
              (l) =>
                `<li class="log-row text-ellipsis" title="${l.replace(
                  /"/g,
                  "&quot;"
                )}">${l}</li>`
            )
            .join("");
        },
        setStatus(text) {
          if (this.dom.status) this.dom.status.textContent = text;
        },
        renderAll() {
          this.renderLogs();
        },
      };

      window.addEventListener("DOMContentLoaded", () => {
        Game.init();
      });
    </script>
  </body>
</html>
