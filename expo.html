<!DOCTYPE html>
<html lang="en" class="h-full bg-black">
<head>
    <meta charset="UTF-8">
    <!-- This viewport tag is CRITICAL for mobile browsing to prevent cutoff -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Mobile Game UI</title>
    <!-- Load Tailwind CSS for easy, responsive styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Use Inter font, a clean sans-serif */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Ensure canvas is crisp on all displays */
        canvas {
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-crisp-edges;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }
    </style>
</head>
<!--
  h-screen: Full viewport height
  overflow-hidden: Prevents scrolling/bouncing on mobile
  flex flex-col: Main layout axis is vertical
-->
<body class="h-screen overflow-hidden flex flex-col text-gray-100">

    <!--
      Top Panel: 25% height (h-1/4)
      flex-shrink-0: Prevents this panel from shrinking
      p-4: Padding
      bg-gray-900: Dark background for the panel
      rounded-b-lg: Nice modern rounded bottom corners
    -->
    <div id="top-panel" class="h-1/4 flex-shrink-0 p-4 bg-gray-900 rounded-b-lg shadow-lg overflow-hidden">
        <div class="flex justify-between items-center mb-3">
            <span class="text-lg font-bold text-green-400 animate-pulse">‚óè STATUS: LIVE</span>
            <span class="text-xs font-mono text-gray-400">SYS_8774B</span>
        </div>

        <!-- Live Data Numbers -->
        <div class="grid grid-cols-2 gap-2 text-sm mb-3">
            <div>
                <span class="text-gray-500">Counter 1:</span>
                <span class="font-mono text-cyan-400 ml-1" id="data-1">0.00</span>
            </div>
            <div>
                <span class="text-gray-500">Rate 1:</span>
                <span class="font-mono text-cyan-400 ml-1" id="data-2">0.00/s</span>
            </div>
            <div>
                <span class="text-gray-500">Counter 2:</span>
                <span class="font-mono text-amber-400 ml-1" id="data-3">0.00</span>
            </div>
            <div>
                <span class="text-gray-500">Rate 2:</span>
                <span class="font-mono text-amber-400 ml-1" id="data-4">0.00/s</span>
            </div>
        </div>

        <!-- Live Chart Canvas -->
        <div class="w-full h-16 grid grid-cols-2 gap-2">
            <!-- UPDATE: This canvas will now be used for the sine wave -->
            <canvas id="live-chart-line" class="w-full h-full bg-black bg-opacity-25 rounded-md"></canvas>
            <canvas id="live-chart-bar" class="w-full h-full bg-black bg-opacity-25 rounded-md"></canvas>
        </div>
    </div>

    <!--
      Middle Panel: Fills remaining space (flex-1)
      This area is intentionally left blank as requested.
    -->
    <div id="middle-panel" class="flex-1 overflow-auto">
        <!-- Blank area for game content -->
    </div>

    <!--
      Bottom Bar: 15% height
      flex-shrink-0: Prevents shrinking
      bg-gray-900: Match top panel
      rounded-t-lg: Nice rounded top corners
      flex justify-center items-center: Center the button
    -->
    <div id="bottom-bar" class="h-[15%] flex-shrink-0 bg-gray-900 rounded-t-lg shadow-inner flex justify-center items-center">
        <!--
          Tappable Button
          w-20 h-20: Large, easy-to-tap size
          rounded-full: Makes it round
          active:scale-90: The tap animation
          transition-all: Smooths the animation
        -->
        <button id="main-button" class="w-20 h-20 bg-cyan-500 rounded-full shadow-lg flex items-center justify-center text-white transition-all duration-150 active:scale-90 active:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-300">
            <!-- SVG icon removed -->
        </button>
    </div>

    <script>
        // --- Data Update Logic ---
        const data1 = document.getElementById('data-1');
        const data2 = document.getElementById('data-2');
        const data3 = document.getElementById('data-3');
        const data4 = document.getElementById('data-4');

        // Counter variables
        let counter1 = 0;
        let counter2 = 0;
        const counter1Rate = 1.5; // units per second
        const counter2Rate = 0.75; // units per second

        function updateNumbers() {
            // Increment counters based on rate and interval (200ms = 0.2s)
            counter1 += counter1Rate * 0.2;
            counter2 += counter2Rate * 0.2;

            data1.textContent = counter1.toFixed(2);
            data2.textContent = counter1Rate.toFixed(2) + '/s';
            data3.textContent = counter2.toFixed(2);
            data4.textContent = counter2Rate.toFixed(2) + '/s';
        }

        // --- Canvas Chart Logic ---
        const lineCanvas = document.getElementById('live-chart-line');
        const lineCtx = lineCanvas.getContext('2d');
        const barCanvas = document.getElementById('live-chart-bar');
        const barCtx = barCanvas.getContext('2d');

        // --- Bar Chart Logic (Unchanged) ---
        const numBars = 10; // Number of bars for bar chart
        let barChartData = [];

        function initBarChartData() {
            barChartData = []; // Clear data
            for (let i = 0; i < numBars; i++) {
                barChartData.push(Math.random() * 100); // Random height 0-100
            }
        }

        function drawBarChart() {
            // Robust resizing check
            if (barCanvas.offsetWidth > 0 && barCanvas.offsetHeight > 0) {
                 if (barCanvas.width !== barCanvas.offsetWidth || barCanvas.height !== barCanvas.offsetHeight) {
                    barCanvas.width = barCanvas.offsetWidth;
                    barCanvas.height = barCanvas.offsetHeight;
                 }
            } else {
                return; // Don't draw if 0
            }

            barCtx.clearRect(0, 0, barCanvas.width, barCanvas.height);
            barCtx.fillStyle = '#4ade80'; // Tailwind 'green-400'
            const barWidth = barCanvas.width / numBars;

            for (let i = 0; i < barChartData.length; i++) {
                const barHeight = (barChartData[i] / 100) * barCanvas.height;
                const x = i * barWidth;
                const y = barCanvas.height - barHeight;
                barCtx.fillRect(x, y, barWidth - 2, barHeight);
            }
        }

        // --- UPDATED: Dynamic Sine Wave Logic ---
        let phase = 0; // This will be our time/phase offset
        
        // Wave shape parameters
        let currentAmplitude, targetAmplitude;
        let currentWaves, targetWaves;
        let lastWaveChange = 0;
        const waveChangeInterval = 5000; // Change wave every 5 seconds

        function updateWaveShape() {
            // Check if it's time to change the wave
            if (Date.now() - lastWaveChange > waveChangeInterval) {
                // Pick a new target amplitude (20% to 45% of height)
                targetAmplitude = 0.2 + Math.random() * 0.25; 
                // Pick a new target frequency (2 to 8 waves across width)
                targetWaves = 2 + Math.random() * 6; 
                lastWaveChange = Date.now();
            }

            // Smoothly "tween" the current values towards the target values
            // This creates the morphing effect
            currentAmplitude += (targetAmplitude - currentAmplitude) * 0.02;
            currentWaves += (targetWaves - currentWaves) * 0.02;
        }

        function drawSineWave() {
            // UPDATE: Robust resizing. Check every frame.
            // This ensures the canvas is always the correct size.
            if (lineCanvas.offsetWidth > 0 && lineCanvas.offsetHeight > 0) {
                 if (lineCanvas.width !== lineCanvas.offsetWidth || lineCanvas.height !== lineCanvas.offsetHeight) {
                    lineCanvas.width = lineCanvas.offsetWidth;
                    lineCanvas.height = lineCanvas.offsetHeight;
                 }
            } else {
                return; // Don't draw if size is 0
            }

            // Update the wave shape (amplitude, frequency)
            updateWaveShape();

            lineCtx.clearRect(0, 0, lineCanvas.width, lineCanvas.height);
            lineCtx.strokeStyle = '#4ade80'; // Tailwind 'green-400'
            lineCtx.lineWidth = 2;
            lineCtx.beginPath();

            const w = lineCanvas.width;
            const h = lineCanvas.height;
            const centerY = h / 2;
            
            // Use the dynamic amplitude (scaled to 45% of height max)
            const amplitude = h * currentAmplitude; 
            // Use the dynamic wave count
            const frequency = (Math.PI * 2) / w * currentWaves; 

            // Start path at x=0
            let y = centerY + Math.sin(phase) * amplitude;
            lineCtx.moveTo(0, y);

            // Draw the wave across the canvas width
            for (let x = 1; x < w; x++) {
                y = centerY + Math.sin(x * frequency + phase) * amplitude;
                lineCtx.lineTo(x, y);
            }

            lineCtx.stroke();
        }
        
        // This is the main animation loop for the sine wave
        function animateSineWave() {
            phase += 0.05; // Controls the speed of the wave scrolling
            drawSineWave();
            // requestAnimationFrame is smoother than setInterval
            requestAnimationFrame(animateSineWave);
        }
        
        // --- End of Dynamic Sine Wave Logic ---


        // Function to update data (called by interval)
        function updateSlowFeed() {
            // 1. Update text numbers
            updateNumbers();

            // 2. Update bar chart data (randomly change one bar's height)
            const barIndexToUpdate = Math.floor(Math.random() * numBars);
            barChartData[barIndexToUpdate] = Math.random() * 100;

            // 3. Redraw bar chart
            drawBarChart();
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            // Init bar chart data
            initBarChartData();

            // Set initial wave shape
            currentAmplitude = targetAmplitude = 0.4; // Start at 40% height
            currentWaves = targetWaves = 4; // Start with 4 waves
            lastWaveChange = Date.now();

            // Set initial canvas sizes with a small delay
            setTimeout(() => {
                // Initial draw
                drawBarChart();
                // We don't need to call drawSineWave() here, 
                // animateSineWave() will do it on its first frame.

                // Start the SLOW feed for numbers and bar chart
                setInterval(updateSlowFeed, 200);

                // Start the FAST, smooth animation loop for the sine wave
                animateSineWave();

                // Add a simple resize listener
                // The draw functions themselves handle the resizing
                window.addEventListener('resize', () => {
                   // The animation loops will catch the new size
                });
            }, 50); // 50ms delay to ensure layout
        });
    </script>
</body>
</html>
