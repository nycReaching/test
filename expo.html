<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--
      This viewport tag is essential for mobile.
      - 'width=device-width' sets the width to the device's screen.
      - 'initial-scale=1.0' sets the default zoom level.
      - 'user-scalable=no' prevents the user from zooming in or out,
        which is common for web-based games.
    -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Simple Game UI</title>

    <!-- Load Tailwind CSS for utility-first styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Load the Inter font for a clean, modern look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* Global styles to enforce the black background, default font,
          and prevent any scrolling or "bouncing" on mobile devices.
        */
        html, body {
            overflow: hidden; /* Prevents all scrolling */
            background-color: #000;
            font-family: 'Inter', sans-serif;
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        /* Ensure the body fills the *entire* available viewport.
          '100vh' is a fallback, but '100dvh' (dynamic viewport height)
          is better for modern mobile browsers as it accounts for
          dynamic UI like the address bar appearing or hiding.
        */
        body {
            height: 100vh;
            height: 100dvh;
        }

        /* MODIFIED: This class is now only for press/release mechanics */
        .tappable-button {
            /* This transition now correctly applies to the release,
              as the :active state will override it.
            */
            transition: transform 0.1s ease-out,
                        background-image 0.1s ease-out,
                        box-shadow 0.1s ease-out,
                        border 0.1s ease-out;
        }

        /* MODIFIED: This class is now only for press/release mechanics */
        .tappable-button:active {
            transform: scale(0.95);
            /* This is the key. It makes the pressed state
              appear *instantly* with no delay.
            */
            transition: none;
        }

        /* --- NEW: Top Button (Red) --- */
        .button-top {
            /* Dark Red: (#991b1b) */
            background-image: radial-gradient(circle, rgba(153, 27, 27, 0.8) 0%, rgba(153, 27, 27, 0.5) 70%);
            /* LESS GLOW: reduced shadow size and opacity */
            box-shadow: 0 0 5px 1px rgba(153, 27, 27, 0.7);
            border: 2px solid rgba(153, 27, 27, 0.8);
        }

        .button-top:active {
            /* Pink Flash: (#f472b6) */
            background-image: radial-gradient(circle, rgba(244, 114, 182, 0.8) 0%, rgba(244, 114, 182, 0.5) 70%);
            /* LESS GLOW: reduced shadow size and opacity */
            box-shadow: 0 0 8px 2px rgba(244, 114, 182, 0.7);
            border: 2px solid rgba(244, 114, 182, 0.8);
        }

        /* --- NEW: Bottom Button (Green) --- */
        .button-bottom {
            /* Dark Green: (#14532d) */
            background-image: radial-gradient(circle, rgba(20, 83, 45, 0.8) 0%, rgba(20, 83, 45, 0.5) 70%);
            /* LESS GLOW: reduced shadow size and opacity */
            box-shadow: 0 0 5px 1px rgba(20, 83, 45, 0.7);
            border: 2px solid rgba(20, 83, 45, 0.8);
        }

        .button-bottom:active {
            /* Yellow Flash: (#eab308) */
            background-image: radial-gradient(circle, rgba(234, 179, 8, 0.8) 0%, rgba(234, 179, 8, 0.5) 70%);
            /* LESS GLOW: reduced shadow size and opacity */
            box-shadow: 0 0 8px 2px rgba(234, 179, 8, 0.7);
            border: 2px solid rgba(234, 179, 8, 0.8);
        }

        /* --- NEW: Slot Emoji Styling --- */
        .slot-emoji {
            /* Start invisible */
            opacity: 0;
            /* Add a fade-in transition */
            transition: opacity 0.3s ease-in-out;
            /* Prevent text selection */
            user-select: none;

            /* NEW: Fix for first spin animation pop-in */
            display: inline-flex; /* Use flex to center emoji */
            justify-content: center;
            align-items: center;
            width: 2.5rem;  /* Set a fixed size (approx 3xl) */
            height: 2.5rem; /* Set a fixed size (approx 3xl) */
            line-height: 2.5rem; /* Ensure vertical centering */
        }
        
        .slot-emoji.visible {
            /* Make visible */
            opacity: 1;
        }

    </style>
</head>
<body class="bg-black">

    <!--
      Main container.
      - Fills the entire dynamic viewport (h-full maps to 100dvh from the body style).
      - 'relative' allows us to position the lines and outline inside it.
      - 'p-2' adds padding so the outline has space from the edge.
      - 'box-border' ensures padding is included in the total size.
    -->
    <div class="h-full w-full relative p-2 box-border">

        <!--
          The "soft blue outline".
        -->
        <div class="absolute inset-2"
             style="box-shadow: 0 0 8px 2px rgba(96, 165, 250, 0.7); border-radius: 0.5rem;">
        </div>

        
        <!--
          MODIFIED: Player Stats Display
          - Changed to neon green, single value
        -->
        <div class="absolute left-4 text-green-400 text-lg font-bold"
             style="top: calc(50% - 2rem - 1.75rem); /* Positioned above the upper center line */ text-shadow: 0 0 5px rgba(52, 211, 153, 0.7);">
            <div id="player-money-display">$100</div>
        </div>


        <!--
          MODIFIED: Center Emoji Display
          - Now contains 5 empty <span> elements with IDs
        -->
        <div class="absolute left-4 right-4 flex justify-center items-center space-x-4"
             style="top: calc(50% - 2rem);
                    height: 4rem;">
            <!-- Emojis will be inserted here by JS -->
            <span id="slot-1" class="text-3xl slot-emoji"></span>
            <span id="slot-2" class="text-3xl slot-emoji"></span>
            <span id="slot-3" class="text-3xl slot-emoji"></span>
            <span id="slot-4" class="text-3xl slot-emoji"></span>
            <span id="slot-5" class="text-3xl slot-emoji"></span>
        </div>


        <!--
          REMOVED: Duplicate emoji block that was here
        -->


        <!--
          NEW: The slim top panel horizontal line.
          - 'absolute' positions it.
          - 'left-4 right-4' insets it from the sides, matching the outline.
          - 'top: 3rem' places it 2rem below the top edge of the outline.
          - Styling matches the other lines.
        -->
        <div class="absolute left-4 right-4"
             style="top: 3rem;
                    height: 2px;
                    background-color: rgba(96, 165, 250, 0.7);
                    box-shadow: 0 0 6px 1px rgba(96, 165, 250, 0.7);
                    border-radius: 1px;">
        </div>

        <!--
          The horizontal line just *above* center.
        -->
        <div class="absolute left-4 right-4"
             style="top: calc(50% - 2rem);
                    height: 2px;
                    background-color: rgba(96, 165, 250, 0.7);
                    box-shadow: 0 0 6px 1px rgba(96, 165, 250, 0.7);
                    border-radius: 1px;">
        </div>

        <!--
          The horizontal line just *below* center.
        -->
        <div class="absolute left-4 right-4"
             style="top: calc(50% + 2rem);
                    height: 2px;
                    background-color: rgba(96, 165, 250, 0.7);
                    box-shadow: 0 0 6px 1px rgba(96, 165, 250, 0.7);
                    border-radius: 1px;">
        </div>

        <!--
          NEW: The vertical line splitting the bottom section.
        -->
        <div class="absolute"
             style="left: 50%;
                    top: calc(50% + 2.5rem); /* MODIFIED: Added 0.5rem gap from top line */
                    bottom: 1rem; /* Matches bottom-4 */
                    width: 2px;
                    background-color: rgba(96, 165, 250, 0.7);
                    box-shadow: 0 0 6px 1px rgba(96, 165, 250, 0.7);
                    border-radius: 1px;">
        </div>

        <!--
          NEW: Button container for the bottom-right quadrant.
        -->
        <div class="absolute left-1/2 right-4 flex flex-col justify-evenly items-center"
             style="top: calc(50% + 2.5rem); /* MODIFIED: Matched gap from top line */
                    bottom: 1rem; /* Matches bottom-4 */
                    ">

            <!--
              MODIFIED: Added 'button-top' class and 'action-button' ID
            -->
            <button
                type="button"
                aria-label="Button 1"
                id="action-button"
                class="tappable-button button-top w-16 h-16 rounded-full cursor-pointer select-none">
            </button>

            <!--
              MODIFIED: Added 'button-bottom' class and 'spin-button' ID
            -->
            <button
                type="button"
                aria-label="Button 2"
                id="spin-button"
                class="tappable-button button-bottom w-16 h-16 rounded-full cursor-pointer select-CORS
                select-none">
            </button>

        </div>

        <!--
          REMOVED: Stray buttons and div that were here
        -->

        <!--
          NEW: The small horizontal line in the bottom-left.
          - 'absolute' positions it.
          - 'left-4' (1rem) insets it from the left outline.
          - 'right: calc(50% + 0.5rem)' stops it 0.5rem before the center vertical line.
          - 'bottom: 3rem' places it 2rem above the bottom outline (mirroring the top panel).
          - Styling matches the other lines.
        -->
        <div class="absolute"
             style="left: 1rem; /* Matches left-4 */
                    right: calc(50% + 0.5rem);
                    bottom: 3rem;
                    height: 2px;
                    background-color: rgba(96, 165, 250, 0.7);
                    box-shadow: 0 0 6px 1px rgba(96, 165, 250, 0.7);
                    border-radius: 1px;">
        </div>

    </div>

    <!-- --- NEW: Game Logic Script --- -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Game State ---
            let playerMoney = 100;
            const spinCost = 1;
            let isSpinning = false;
            let isFirstSpin = true; // NEW: Flag for first spin
            const fruits = ['üçí', 'üçì', 'üçä', 'üçã', 'üçâ', 'üçá', 'üçç', 'ü•ù'];

            // --- DOM Elements ---
            const spinButton = document.getElementById('spin-button');
            const playerMoneyDisplay = document.getElementById('player-money-display');
            
            // Get all slot elements
            const slots = [
                document.getElementById('slot-1'),
                document.getElementById('slot-2'),
                document.getElementById('slot-3'),
                document.getElementById('slot-4'),
                document.getElementById('slot-5')
            ];

            // --- Helper Functions ---
            
            /**
             * Updates the UI text for money and cost.
             */
            function updateUI() {
                playerMoneyDisplay.textContent = `$${playerMoney}`;
            }

            /**
             * Gets a random fruit from the fruits array.
             */
            function getRandomFruit() {
                return fruits[Math.floor(Math.random() * fruits.length)];
            }

            // --- Main Game Function ---
            
            /**
             * Handles the spin logic.
             */
            function spin() {
                // Prevent multiple spins at once
                if (isSpinning) return;

                // Check if player can afford the spin
                if (playerMoney < spinCost) {
                    // Optional: Add a "not enough money" visual cue here
                    console.log("Not enough money!");
                    return;
                }

                // Start spinning
                isSpinning = true;
                playerMoney -= spinCost;
                updateUI();

                // 1. Reset all slots to be invisible
                // This will trigger the 300ms fade-out animation
                slots.forEach(slot => {
                    slot.classList.remove('visible');
                });

                // 2. Determine wait time.
                // If it's the first spin, start immediately (0ms).
                // Otherwise, wait for the 300ms fade-out (from step 1) to complete.
                const waitTime = isFirstSpin ? 0 : 300;
                isFirstSpin = false; // It's no longer the first spin

                // 3. Wait for fade-out (if needed), then fade-in
                setTimeout(() => {
                    // 4. Animate each slot fading in, one by one
                    let delay = 0;
                    const delayIncrement = 150; // 150ms between each slot appearing

                    // --- FIX WAS HERE ---
                    // This forEach loop now has the correct logic inside it.
                    slots.forEach((slot, index) => {
                        
                        setTimeout(() => {
                            // Set a new random fruit
                            slot.textContent = getRandomFruit();
                            // Add 'visible' class to trigger the fade-in
                            slot.classList.add('visible');

                            // If this is the last slot, allow spinning again
                            if (index === slots.length - 1) {
                                setTimeout(() => {
                                    isSpinning = false;
                                }, 200); // Small buffer after last animation
                            }
                        }, delay);
                        
                        delay += delayIncrement;
                    });
                }, waitTime); // Use the dynamic waitTime
            }

            // --- Initialization ---
            spinButton.addEventListener('click', spin);
            // Also listen for touchstart for faster mobile response
            spinButton.addEventListener('touchstart', (e) => {
                e.preventDefault(); // Prevent 'click' event from firing too
                spin();
            }, { passive: false });

            // Set initial UI text
            updateUI();
        });
    </script>

</body>
</html>

