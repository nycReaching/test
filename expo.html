<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Mobile Creature Draft Prototype</title>
  <style>
    :root {
      --bg: #0f1115;
      --bg-panel: rgba(17, 19, 24, 0.8);
      --card: rgba(24, 27, 33, 0.9);
      --border: rgba(255, 255, 255, 0.08);
      --accent: #f8c04f;
      --accent-soft: rgba(248, 192, 79, 0.12);
      --hp: #ff6b6b;
      --text: #ffffff;
      --muted: rgba(255, 255, 255, 0.4);
      --radius-lg: 20px;
      --radius-md: 14px;
      --radius-sm: 10px;
    }
    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    body {
      margin: 0;
      background: radial-gradient(circle at top, #171a21 0%, #0f1115 50%, #0a0b0e 100%);
      color: var(--text);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }
    .app-shell {
      width: 100%;
      max-width: 480px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      gap: 0.55rem;
      padding: calc(0.6rem + env(safe-area-inset-top, 0px)) 0.65rem calc(0.5rem + env(safe-area-inset-bottom, 0px));
    }
    header.topbar {
      height: 52px;
      border: 1px solid rgba(248, 192, 79, 0.25);
      background: linear-gradient(115deg, rgba(248, 191, 79, 0.25) 0%, rgba(15, 17, 22, 0.5) 30%, rgba(15, 17, 22, 0.25) 100%);
      backdrop-filter: blur(12px);
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.35rem 0.7rem 0.35rem 0.55rem;
      gap: 0.4rem;
    }
    .top-left {
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }
    .game-title {
      font-size: 0.85rem;
      font-weight: 600;
      line-height: 1.1;
    }
    .phase-pill {
      font-size: 0.65rem;
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.05);
      border-radius: 999px;
      padding: 0.1rem 0.5rem 0.2rem;
    }
    .resource-cluster {
      display: flex;
      gap: 0.25rem;
    }
    .chip {
      background: rgba(13, 14, 16, 0.5);
      padding: 0.1rem 0.45rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.03);
      font-size: 0.62rem;
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }
    .chip strong {
      font-size: 0.7rem;
      letter-spacing: -0.01em;
    }
    main.screen {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
      min-height: calc(100vh - 52px - 56px - env(safe-area-inset-top, 0px));
    }
    .panel-context {
      background: radial-gradient(circle at top, rgba(248,191,79,0.085) 0%, rgba(9,10,12,0.4) 90%);
      border: 1px solid rgba(248, 192, 79, 0.06);
      border-radius: var(--radius-lg);
      padding: 0.55rem 0.55rem 0.45rem;
      min-height: 110px;
      display: flex;
      gap: 0.4rem;
      align-items: flex-start;
    }
    .context-body {
      flex: 1;
      min-height: 96px;
    }
    .context-title {
      font-size: 0.73rem;
      font-weight: 600;
      letter-spacing: -0.01em;
    }
    .context-text {
      font-size: 0.65rem;
      color: var(--muted);
      margin-top: 0.3rem;
      line-height: 1.25;
      min-height: 1.7rem;
    }
    .context-action-hint {
      margin-top: 0.45rem;
      display: flex;
      gap: 0.25rem;
    }
    .hint-pill {
      background: rgba(248,192,79,0.18);
      color: #ffe3aa;
      border-radius: 999px;
      font-size: 0.6rem;
      padding: 0.12rem 0.4rem 0.2rem;
      letter-spacing: -0.015em;
    }
    .context-illustration {
      width: 78px;
      height: 78px;
      background: radial-gradient(circle, rgba(248,192,79,0.24) 0%, rgba(3,3,3,0) 65%);
      border: 1px solid rgba(248,192,79,0.06);
      border-radius: 18px;
      display: grid;
      place-items: center;
      font-size: 2.3rem;
    }
    .flex-row-primary {
      display: flex;
      gap: 0.55rem;
      min-height: 192px;
    }
    .side-companions {
      width: 64px;
      background: rgba(15,16,20,0.35);
      border: 1px solid rgba(255,255,255,0.02);
      border-radius: var(--radius-md);
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      padding: 0.35rem 0.25rem;
    }
    .companion-slot {
      height: 48px;
      border-radius: 14px;
      background: rgba(9,10,12,0.35);
      border: 1px dashed rgba(255,255,255,0.04);
      display: grid;
      place-items: center;
      font-size: 1.6rem;
      color: rgba(255,255,255,0.14);
    }
    .grid-shell {
      flex: 1.1;
      background: rgba(14,16,20,0.5);
      border: 1px solid rgba(255,255,255,0.02);
      border-radius: var(--radius-md);
      padding: 0.4rem;
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
      min-width: 0;
    }
    .grid-title-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.4rem;
    }
    .grid-title {
      font-size: 0.62rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: rgba(255,255,255,0.6);
    }
    .grid-body {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.35rem;
      align-content: start;
    }
    .grid-item {
      aspect-ratio: 1/1;
      background: radial-gradient(circle at 20% 20%, rgba(248,192,79,0.05) 0%, rgba(4,4,6,0.2) 45%, rgba(4,4,6,0.6) 100%);
      border: 1px solid rgba(255,255,255,0.015);
      border-radius: 14px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.1rem;
      font-size: 1.75rem;
      cursor: pointer;
      transition: transform 0.16s;
    }
    .grid-item:active {
      transform: scale(0.97);
    }
    .grid-item small {
      font-size: 0.55rem;
      color: rgba(255,255,255,0.45);
    }
    .character-card {
      width: 110px;
      background: radial-gradient(circle at top, rgba(54,169,241,0.12) 0%, rgba(11,12,15,0.4) 100%);
      border: 1px solid rgba(255,255,255,0.03);
      border-radius: 16px;
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      padding: 0.4rem 0.4rem 0.35rem;
      align-items: center;
    }
    .character-emoji {
      width: 68px;
      height: 68px;
      border-radius: 18px;
      background: radial-gradient(circle, rgba(255,255,255,0.03) 0%, rgba(0,0,0,0) 65%);
      display: grid;
      place-items: center;
      font-size: 2.4rem;
    }
    .hp-bar-wrap {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: rgba(255,255,255,0.03);
      overflow: hidden;
      position: relative;
    }
    .hp-bar {
      height: 100%;
      background: linear-gradient(90deg, #ff6b6b, #ffc46b);
      transition: width 0.24s ease-out;
    }
    .char-meta {
      font-size: 0.6rem;
      color: rgba(255,255,255,0.55);
      text-align: center;
    }
    .info-panel {
      background: rgba(15,16,20,0.45);
      border: 1px solid rgba(255,255,255,0.015);
      border-radius: var(--radius-md);
      padding: 0.4rem 0.45rem 0.45rem;
      min-height: 96px;
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }
    .info-heading {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.6rem;
    }
    .info-heading h3 {
      margin: 0;
      font-size: 0.6rem;
    }
    .info-body {
      font-size: 0.6rem;
      line-height: 1.3;
      color: rgba(255,255,255,0.6);
      min-height: 2.1rem;
    }
    .info-actions {
      display: flex;
      gap: 0.35rem;
    }
    .btn {
      flex: 1;
      border: none;
      border-radius: 12px;
      background: rgba(248,192,79,0.16);
      color: #fff;
      font-weight: 600;
      font-size: 0.62rem;
      padding: 0.38rem 0.25rem 0.45rem;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.2rem;
      cursor: pointer;
    }
    .btn.main {
      background: radial-gradient(circle at top, rgba(248,192,79,1) 0%, rgba(250,168,46,0.6) 60%, rgba(185,120,36,0.5) 100%);
      box-shadow: 0 10px 20px rgba(248, 192, 79, 0.23);
      color: #0f0f11;
    }
    .btn.disabled {
      opacity: 0.6;
      pointer-events: none;
    }
    footer.actionbar {
      background: radial-gradient(circle, rgba(13,13,14,0.7) 0%, rgba(0,0,0,0) 60%);
      border: 1px solid rgba(248,192,79,0.01);
      border-radius: 999px;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.45rem;
      padding: 0.35rem 0.45rem 0.3rem 0.45rem;
    }
    .xp-bar {
      flex: 1;
      background: rgba(255,255,255,0.03);
      border-radius: 999px;
      height: 7px;
      overflow: hidden;
      position: relative;
    }
    .xp-fill {
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, #f8c04f 0%, #7dfbe4 60%, rgba(125,251,228,0) 100%);
      width: 40%;
    }
    .bottom-btn {
      width: 50px;
      height: 50px;
      border-radius: 999px;
      background: radial-gradient(circle, rgba(248,192,79,0.85) 0%, rgba(248,192,79,0.35) 60%, rgba(248,192,79,0.01) 100%);
      display: grid;
      place-items: center;
      font-size: 1.35rem;
      border: 1px solid rgba(255,255,255,0.07);
      cursor: pointer;
    }
    .hidden { display: none !important; }
    @media (max-width: 430px) {
      .flex-row-primary {
        gap: 0.35rem;
      }
      .character-card {
        width: 96px;
      }
      .grid-body {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
      .panel-context {
        min-height: 100px;
      }
      .side-companions {
        width: 56px;
      }
    }
    @media (max-width: 375px) {
      .flex-row-primary {
        flex-wrap: wrap;
      }
      .character-card {
        width: 100%;
        flex-direction: row;
        justify-content: flex-start;
      }
      .character-emoji {
        width: 60px;
        height: 60px;
      }
      .side-companions {
        flex-direction: row;
        width: 100%;
        height: 58px;
      }
      .companion-slot {
        flex: 1;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell" id="app">
    <header class="topbar">
      <div class="top-left">
        <div class="game-title">Hinterland Draft</div>
        <div class="phase-pill" id="phase-pill">Phase: Forage</div>
      </div>
      <div class="resource-cluster">
        <div class="chip">üí∞ <strong id="gold-val">120</strong></div>
        <div class="chip">‚≠ê <strong id="soul-val">0</strong></div>
      </div>
    </header>

    <main class="screen">
      <section class="panel-context" id="context-panel">
        <div class="context-body">
          <div class="context-title" id="context-title">Choose a beast to interact with.</div>
          <div class="context-text" id="context-text">Eat exactly one for a buff. Keep exactly one as a future companion.</div>
          <div class="context-action-hint" id="context-hints">
            <span class="hint-pill">1/2 actions used</span>
            <span class="hint-pill">Tap a creature</span>
          </div>
        </div>
        <div class="context-illustration" id="context-emoji">ü¶ä</div>
      </section>

      <div class="flex-row-primary">
        <aside class="side-companions" id="companion-slots">
          <div class="companion-slot" data-slot="0" title="Companion slot 1">+</div>
          <div class="companion-slot" data-slot="1" title="Companion slot 2">+</div>
          <div class="companion-slot" data-slot="2" title="Companion slot 3">+</div>
        </aside>

        <section class="grid-shell">
          <div class="grid-title-row">
            <div class="grid-title" id="grid-title">Forage beasts (6)</div>
            <div class="grid-title" id="grid-subtitle">Eat 1 ‚Ä¢ Keep 1</div>
          </div>
          <div class="grid-body" id="icon-grid"></div>
        </section>

        <section class="character-card">
          <div class="character-emoji" id="hero-emoji">üßù</div>
          <div class="hp-bar-wrap">
            <div class="hp-bar" id="hp-bar" style="width:100%"></div>
          </div>
          <div class="char-meta" id="char-meta">HP 10/10<br />Weapon: none</div>
        </section>
      </div>

      <section class="info-panel" id="info-panel">
        <div class="info-heading">
          <h3 id="info-title">No beast selected</h3>
          <span id="info-tag" style="color:rgba(255,255,255,0.32);font-size:0.6rem;">forage phase</span>
        </div>
        <div class="info-body" id="info-body">Pick a creature from the grid to see actions.</div>
        <div class="info-actions" id="info-actions">
          <button class="btn disabled" id="btn-eat">Eat</button>
          <button class="btn disabled" id="btn-keep">Keep</button>
        </div>
      </section>
    </main>

    <footer class="actionbar">
      <div class="bottom-btn" id="btn-help" title="Hints">‚ùî</div>
      <div class="xp-bar" aria-label="xp progress"><div class="xp-fill" id="xp-fill"></div></div>
      <div class="bottom-btn" id="btn-main" title="Advance">‚ñ∂</div>
    </footer>
  </div>

  <script>
    // static data for prototype
    const DATA = {
      animals: [
        { id: 'fox', name: 'Amber Fox', emoji: 'ü¶ä', desc: 'Light eater. Costs 1 HP to eat, grants fox agility.', hpCost: 1, keepAs: 'Fox scout' },
        { id: 'bear', name: 'Moss Bear', emoji: 'üêª', desc: 'Hearty meat. Costs 2 HP to eat, grants temp armor.', hpCost: 2, keepAs: 'Bear guardian' },
        { id: 'eagle', name: 'Peak Eagle', emoji: 'ü¶Ö', desc: 'Lean meat. Costs 1 HP, grants vision next node.', hpCost: 1, keepAs: 'Eagle spotter' },
        { id: 'frog', name: 'Marsh Frog', emoji: 'üê∏', desc: 'Toxic. Costs 3 HP, but high spirit buff.', hpCost: 3, keepAs: 'Toad alchemist' },
        { id: 'boar', name: 'Rust Boar', emoji: 'üêó', desc: 'Dense. Costs 2 HP, grants charge bonus.', hpCost: 2, keepAs: 'Boar bruiser' },
        { id: 'owl', name: 'Grave Owl', emoji: 'ü¶â', desc: 'Costs 1 HP, bargain with spirits.', hpCost: 1, keepAs: 'Owl whisperer' },
      ],
      weapons: [
        { id: 'sword', name: 'Sunblade', emoji: 'üó°Ô∏è', desc: 'Balanced starter weapon. Boosts basic attack.' },
        { id: 'bow', name: 'Moonbow', emoji: 'üèπ', desc: 'Ranged opener. Synergizes with fox/eagle.' },
        { id: 'staff', name: 'Vine Staff', emoji: 'ü™Ñ', desc: 'Control tool. Synergizes with frog/owl.' },
        { id: 'axe', name: 'Timber Axe', emoji: 'ü™ì', desc: 'Heavy hit. Synergizes with boar/bear.' },
        { id: 'dagger', name: 'Silent Fang', emoji: 'üó°Ô∏è', desc: 'Double strike. Lightweight.' },
      ],
    };

    const state = {
      phase: 'forage', // 'forage' -> 'arm'
      selectedId: null,
      eaten: false,
      kept: false,
      hp: { cur: 10, max: 10 },
      gold: 120,
      soul: 0,
      heroEmoji: 'üßù',
      weapon: null,
      companions: [null, null, null],
    };

    const els = {
      phasePill: document.getElementById('phase-pill'),
      contextTitle: document.getElementById('context-title'),
      contextText: document.getElementById('context-text'),
      contextHints: document.getElementById('context-hints'),
      contextEmoji: document.getElementById('context-emoji'),
      grid: document.getElementById('icon-grid'),
      gridTitle: document.getElementById('grid-title'),
      gridSubtitle: document.getElementById('grid-subtitle'),
      infoPanel: document.getElementById('info-panel'),
      infoTitle: document.getElementById('info-title'),
      infoBody: document.getElementById('info-body'),
      infoTag: document.getElementById('info-tag'),
      btnEat: document.getElementById('btn-eat'),
      btnKeep: document.getElementById('btn-keep'),
      hpBar: document.getElementById('hp-bar'),
      charMeta: document.getElementById('char-meta'),
      heroEmoji: document.getElementById('hero-emoji'),
      goldVal: document.getElementById('gold-val'),
      soulVal: document.getElementById('soul-val'),
      companionSlots: document.querySelectorAll('.companion-slot'),
      btnMain: document.getElementById('btn-main'),
      btnHelp: document.getElementById('btn-help'),
    };

    function renderTop() {
      els.goldVal.textContent = state.gold;
      els.soulVal.textContent = state.soul;
      els.heroEmoji.textContent = state.heroEmoji;
      const hpPct = Math.max(0, Math.min(100, (state.hp.cur / state.hp.max) * 100));
      els.hpBar.style.width = hpPct + '%';
      els.charMeta.innerHTML = `HP ${state.hp.cur}/${state.hp.max}<br />Weapon: ${state.weapon ? state.weapon.name : 'none'}`;
      els.phasePill.textContent = `Phase: ${state.phase === 'forage' ? 'Forage' : 'Arm'}`;
    }

    function renderCompanions() {
      els.companionSlots.forEach((slot, idx) => {
        const c = state.companions[idx];
        if (c) {
          slot.textContent = c.emoji;
          slot.style.borderStyle = 'solid';
          slot.title = c.name;
          slot.style.color = '#fff';
        } else {
          slot.textContent = '+';
          slot.style.borderStyle = 'dashed';
          slot.title = 'Empty companion slot';
          slot.style.color = 'rgba(255,255,255,0.15)';
        }
      });
    }

    function getCurrentList() {
      return state.phase === 'forage' ? DATA.animals : DATA.weapons;
    }

    function renderGrid() {
      const list = getCurrentList();
      els.grid.innerHTML = '';
      list.forEach(item => {
        const cell = document.createElement('div');
        cell.className = 'grid-item';
        cell.dataset.id = item.id;
        cell.innerHTML = `<div>${item.emoji}</div><small>${item.name}</small>`;
        if (state.selectedId === item.id) {
          cell.style.outline = '2px solid rgba(248,192,79,0.8)';
          cell.style.outlineOffset = '-2px';
        }
        els.grid.appendChild(cell);
      });
      if (state.phase === 'forage') {
        els.gridTitle.textContent = `Forage beasts (${DATA.animals.length})`;
        els.gridSubtitle.textContent = `Eat ${state.eaten ? '1‚úì' : '1'} ‚Ä¢ Keep ${state.kept ? '1‚úì' : '1'}`;
      } else {
        els.gridTitle.textContent = `Weapons (${DATA.weapons.length})`;
        els.gridSubtitle.textContent = 'Equip 1 weapon to advance';
      }
    }

    function renderInfo() {
      const list = getCurrentList();
      const selected = list.find(x => x.id === state.selectedId) || null;
      if (!selected) {
        els.infoTitle.textContent = state.phase === 'forage' ? 'No beast selected' : 'No weapon selected';
        els.infoBody.textContent = state.phase === 'forage'
          ? 'Pick a creature from the grid to see actions.'
          : 'Pick a weapon from the grid to equip it.';
        els.infoTag.textContent = state.phase === 'forage' ? 'forage phase' : 'arm phase';
        els.btnEat.classList.add('disabled');
        els.btnKeep.classList.add('disabled');
        return;
      }
      els.infoTitle.textContent = selected.name;
      els.infoBody.textContent = selected.desc;
      els.infoTag.textContent = state.phase === 'forage' ? `HP cost: ${selected.hpCost}` : 'weapon';
      if (state.phase === 'forage') {
        // enable/disable per action
        els.btnEat.textContent = `Eat (${selected.hpCost} HP)`;
        els.btnKeep.textContent = `Keep`;
        els.btnEat.classList.toggle('disabled', state.eaten);
        els.btnKeep.classList.toggle('disabled', state.kept);
      } else {
        els.btnEat.textContent = 'Preview';
        els.btnKeep.textContent = 'Equip';
        els.btnEat.classList.remove('disabled');
        els.btnKeep.classList.remove('disabled');
      }
    }

    function renderContext() {
      if (state.phase === 'forage') {
        els.contextTitle.textContent = 'Choose a beast to interact with.';
        els.contextText.textContent = 'Eat exactly one for a buff. Keep exactly one as a future companion.';
        els.contextEmoji.textContent = 'ü¶ä';
        els.contextHints.innerHTML = '';
        const used = (state.eaten ? 1 : 0) + (state.kept ? 1 : 0);
        const span1 = document.createElement('span');
        span1.className = 'hint-pill';
        span1.textContent = `${used}/2 actions used`;
        const span2 = document.createElement('span');
        span2.className = 'hint-pill';
        span2.textContent = 'Tap a creature';
        els.contextHints.appendChild(span1);
        els.contextHints.appendChild(span2);
      } else {
        els.contextTitle.textContent = 'Arm for the journey.';
        els.contextText.textContent = 'Pick one weapon that matches the companions you kept.';
        els.contextEmoji.textContent = 'üó°Ô∏è';
        els.contextHints.innerHTML = '';
        const span1 = document.createElement('span');
        span1.className = 'hint-pill';
        span1.textContent = 'Equip 1 to proceed';
        els.contextHints.appendChild(span1);
      }
    }

    function selectItem(id) {
      state.selectedId = id;
      renderGrid();
      renderInfo();
    }

    function performEat() {
      if (state.phase !== 'forage' || state.eaten) return;
      const animal = DATA.animals.find(a => a.id === state.selectedId);
      if (!animal) return;
      const newHp = state.hp.cur - animal.hpCost;
      state.hp.cur = Math.max(0, newHp);
      state.eaten = true;
      renderTop();
      renderContext();
      renderInfo();
      els.infoBody.textContent = `You ate ${animal.name}. HP now ${state.hp.cur}/${state.hp.max}.`;
    }

    function performKeep() {
      if (state.phase !== 'forage' || state.kept) return;
      const animal = DATA.animals.find(a => a.id === state.selectedId);
      if (!animal) return;
      const emptyIdx = state.companions.findIndex(x => x === null);
      if (emptyIdx === -1) return;
      state.companions[emptyIdx] = { name: animal.keepAs, emoji: animal.emoji };
      state.kept = true;
      renderCompanions();
      renderContext();
      renderInfo();
      els.infoBody.textContent = `You kept ${animal.name} as ${animal.keepAs}.`;
    }

    function maybeAdvancePhase() {
      if (state.phase === 'forage') {
        if (state.eaten && state.kept) {
          state.phase = 'arm';
          state.selectedId = null;
          renderContext();
          renderGrid();
          renderInfo();
          renderTop();
        }
      } else {
        // future: advance to map/combat
        alert('Prototype: weapon chosen. Proceed to encounter screen.');
      }
    }

    function performEquip() {
      if (state.phase !== 'arm') return;
      const weapon = DATA.weapons.find(w => w.id === state.selectedId);
      if (!weapon) return;
      state.weapon = weapon;
      renderTop();
      renderInfo();
      els.infoBody.textContent = `You equipped ${weapon.name}.`;
    }

    // listeners
    els.grid.addEventListener('click', (e) => {
      const cell = e.target.closest('.grid-item');
      if (!cell) return;
      const id = cell.dataset.id;
      selectItem(id);
    });

    els.infoPanel.addEventListener('click', (e) => {
      const target = e.target;
      if (target.id === 'btn-eat') {
        if (state.phase === 'forage') {
          performEat();
        } else {
          // preview weapon could show a modal later
          alert('Preview: weapon stats not implemented in this prototype.');
        }
      }
      if (target.id === 'btn-keep') {
        if (state.phase === 'forage') {
          performKeep();
          maybeAdvancePhase();
        } else {
          performEquip();
          maybeAdvancePhase();
        }
      }
    });

    els.btnMain.addEventListener('click', () => {
      maybeAdvancePhase();
    });

    els.btnHelp.addEventListener('click', () => {
      alert('Prototype: forage phase -> pick 1 to eat, 1 to keep. Then weapon phase. UI is locked to mobile portrait.');
    });

    // initial render
    renderTop();
    renderCompanions();
    renderGrid();
    renderInfo();
    renderContext();
  </script>
</body>
</html>
